# vim: set sw=4 ts=4 expandtab

# -----------------------------------------------
# # Core Settings
# -----------------------------------------------

# Change Prefix key (Keeping your preference)
unbind-key C-b
set -g prefix `
bind-key ` send-prefix

# Set window and pane numbering to start from 1 (Your setting + panes)
set -g base-index 1
setw -g pane-base-index 1

# Renumber windows sequentially to avoid gaps
set -g renumber-windows on

# Increase history limit
set -g history-limit 100000

# ‚ö°Ô∏è Critical performance setting: remove Esc delay (Kept from your config)
set -s escape-time 0

# Allow Tmux to set the terminal title
set -g set-titles on
setw -g automatic-rename on

# Enable mouse mode
set -g mouse on

# ‚ö°Ô∏è Enable focus events for Vim/Neovim (Kept from your config)
set -g focus-events on

# Lower the display time for messages (4s is a bit long)
set -g display-time 1500

# Status bar refresh interval
set -g status-interval 5

# -----------------------------------------------
# # Visuals & Color
# -----------------------------------------------

# üé® Enable 256 colors
set -g default-terminal "tmux-256color"

# üé® Enable True Color (24-bit color)
# This is standard for modern terminals and makes your themes and Vim look correct.
set -ga terminal-overrides ",xterm-256color:Tc"

# -----------------------------------------------
# # Key Bindings
# -----------------------------------------------

# Reload config file (Highly recommended!)
bind r source-file ~/.tmux.conf \; display "Config Reloaded!"

# Maintain your preference for opening new windows/panes in the current path
bind '-' split-window -v -c "#{pane_current_path}"
bind % split-window -h -c "#{pane_current_path}"
bind c new-window -c "#{pane_current_path}"

# -----------------------------------------------
# # Pane Navigation & Resizing
# -----------------------------------------------

# ‚ö°Ô∏è "Repeatable" pane resizing (Hold Prefix + H/J/K/L)
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# -----------------------------------------------
# # Copy Mode
# -----------------------------------------------

# Enable Vi mode
setw -g mode-keys vi
set -g status-keys vi

# ‚ö°Ô∏è Upgrade the Vi copy mode experience
# 'v' begins selection (like Vim's visual mode)
bind-key -T copy-mode-vi v send-keys -X begin-selection
# 'C-v' begins block selection (like Vim's visual-block)
bind-key -T copy-mode-vi C-v send-keys -X rectangle-toggle
# 'y' copies and exits
bind-key -T copy-mode-vi y send-keys -X copy-selection-and-cancel
# 'Y' copies the whole line
bind-key -T copy-mode-vi Y send-keys -X copy-line

# -----------------------------------------------
# # Plugin Management (TPM Plugins)
# -----------------------------------------------

# Plugin manager
set -g @plugin 'tmux-plugins/tpm'

# üóÇÔ∏è Essentials (Kept from your config)
set -g @plugin 'tmux-plugins/tmux-copycat'          # Search
set -g @plugin 'tmux-plugins/tmux-yank'             # Copy to system clipboard
set -g @plugin 'tmux-plugins/tmux-resurrect'        # Persist/restore Tmux state
set -g @plugin 'tmux-plugins/tmux-continuum'        # Automatic saving

# üé® UI Related
set -g @plugin 'tmux-plugins/tmux-prefix-highlight' # Highlight prefix status
set -g @plugin 'kuoe0/tmux-tomorrow-night'          # tomorrow night color scheme

# For seamless pane navigation between Vim/Tmux
set -g @plugin 'christoomey/vim-tmux-navigator'
# Quickly open highlighted paths/URLs from Tmux
set -g @plugin 'tmux-plugins/tmux-open'

# Easy logging and screen capturing for Tmux.
set -g @plugin 'tmux-plugins/tmux-logging'          # (You can keep this if you use it often, but it's not essential)

# -----------------------------------------------
# # Plugin Settings
# -----------------------------------------------

# Status bar (Kept from your config)
set -g status-left '#{prefix_highlight} #[fg=#969896,bg=#2d2d2d][#S]#[default] '
set -g @continuum-restore 'on'

# Your custom layout binding (Kept)
bind -n M-z if -F '#{@layout_save}' \
    {run 'tmux select-layout "#{@layout_save}" \; set -up @layout_save'} \
    {set -Fp @layout_save "#{window_layout}" ; run 'tmux resizep -y "#{window_height}"'}

# -----------------------------------------------
# # Initialize TPM
# -----------------------------------------------
# Must be at the very end!
run '~/.tmux/plugins/tpm/tpm'
